(()=>{var t={878:()=>{!function(t){"use strict";const e="/wp-json/sync-product-from-amazon/v1/fetch-product";function n(t){return/^[A-Z0-9]{10}$/.test(t)}t(document).on("click",".sync-product-from-amazon__accordion-main .sync-product-from-amazon__accordion-wrap",(function(){const e=t(this).closest(".sync-product-from-amazon__accordion-main"),n=e.find(".sync-product-from-amazon__accordion-content"),o=e.find(".icon");n.stop(!0,!0).slideToggle(500),o.toggleClass("active")})),t(document).on("click","#spfa_fetch_product_details",(function(){const o=t("#spfa_product_asin").val();if(""===o)return document.getElementById("spfa_add_product_empty_asin").style.display="block",!1;if(!n(o))return document.getElementById("spfa_add_product_valid_asin").style.display="block",!1;const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({asin:o})};fetch(e,s).then((t=>t.json())).then((e=>{if(e.ItemsResult.Items.length>0){var n,o,s,a,c,p;const i=e.ItemsResult.Items[0],l=null!==(n=i.ItemInfo.Title.DisplayValue)&&void 0!==n?n:"",r=null!==(o=i.Images.Primary.Large.URL)&&void 0!==o?o:"",d=null!==(s=i.ItemInfo.Features.DisplayValues)&&void 0!==s?s:[],u=null!==(a=i.DetailPageURL)&&void 0!==a?a:"";let _=0;const m=null!==(c=i.Offers.Listings[0].Price.DisplayAmount)&&void 0!==c?c:"";_=parseFloat(i.Offers.Listings[0].Price.Amount)+parseFloat(i.Offers.Listings[0].Price.Savings.Amount);const f=null!==(p=i.Offers.Listings[0].Price.DisplayAmount.charAt(0))&&void 0!==p?p:0;if(""!==l&&t("#spfa_product_title").val(l),""!==r){const e=new Image;e.src=r,e.onload=function(){t("#spfa_product_image").val(r),t("#spfa_product_image_preview").show(),t("#spfa_product_image_preview").attr("src",r)}}""!==u&&t("#spfa_product_link").val(u),""!==_&&t("#spfa_product_price").val(f+_.toFixed(2)),""!==m&&t("#spfa_product_sale_price").val(m),d.length>0&&t("#spfa_product_features").text(d.join("\n"))}}))})),t(document).on("click","#spfa_import_products_button",(function(e){var o,s;e.preventDefault();const a=null!==(o=document.getElementById("spfa_import_product_status").value)&&void 0!==o?o:"publish",c=null!==(s=document.getElementById("spfa_import_product_post_type").value)&&void 0!==s?s:"post";let p="";if(p=t("#spfa_import_products_textarea").val().replaceAll(" ",""),""===p)return document.getElementById("spfa_import_product_empty_asin").style.display="block",!1;const i=p.split(",");for(let e=0;e<i.length;e++)if(!n(i[e]))return document.getElementById("spfa_import_product_valid_asin").style.display="block",t("#spfa_import_product_valid_asin p strong").text("Invalid ASIN number: "+i[e]),!1;!function(t,e,n){const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({asin:t,postStatus:e,postType:n})};if(""===t)return document.getElementById("spfa_import_product_empty_asin").style.display="block",!1;document.getElementById("spfa_import_products_button").style.pointerEvents="none",document.getElementById("sync_product_from_amazon_loader").style.display="block",fetch("/wp-json/sync-product-from-amazon/v1/import-product",o).then((t=>t.json())).then((t=>("success"===(t=JSON.parse(t)).status?document.getElementById("spfa_import_product_success").style.display="block":document.getElementById("spfa_import_product_fail").style.display="block",document.getElementById("sync_product_from_amazon_loader").style.display="none",document.getElementById("spfa_import_products_button").style.pointerEvents="auto",t)))}(p,a,c)})),t(document).on("click","#spfa_app_delete_cache",(function(t){t.preventDefault(),!0===confirm("Are you sure want to clear cache?")&&fetch("/wp-json/sync-product-from-amazon/v1/clear-cache",{method:"POST",headers:{"Content-Type":"application/json"}}).then((t=>{200===t.status?document.getElementById("spfa_clear_cache_success").style.display="block":document.getElementById("spfa_clear_cache_fail").style.display="block"}))})),t(document).on("click","#spfa_test_api_connection",(function(t){t.preventDefault();const o=document.getElementById("spfa_amazon_api_access_key").value,s=document.getElementById("spfa_amazon_api_secret_key").value,a=document.getElementById("spfa_amazon_partner_tag").value;if(""===o||""===s||""===a)return document.getElementById("spfa_test_api_empty_credentials").style.display="block",!1;const c=document.getElementById("spfa_asin_number").value;if(!n(c))return document.getElementById("spfa_test_product_valid_asin").style.display="block",!1;const p={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({asin:c,testConnection:!0})};fetch(e,p).then((t=>{200===t.status?document.getElementById("spfa_test_api_success").style.display="block":document.getElementById("spfa_test_api_fail").style.display="block"}))})),t(document).on("click",".sync-product-from-amazon__main .notice-dismiss",(function(e){e.preventDefault(),t(this).parent().hide()}))}(jQuery)}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";n(878)})()})();